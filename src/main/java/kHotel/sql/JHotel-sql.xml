<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>JHotel</comment>


	<!-- 회원가입 -->
	<entry key="signUp11">
		INSERT INTO MEMBER
		VALUES(SEQ_MEMBER_NO.NEXTVAL, ?, ?,
		?, ?, ?, ?, ?,
		 DEFAULT, DEFAULT)
	</entry>

	<!-- 현재 예약 -->
	<entry key="reservationUp">
		SELECT BOOK_NO , HOTEL_TITLE, ROOM_NM,TO_CHAR(CHECKIN_DT, 'YYYY-MM-DD') CHECKIN_DT ,TO_CHAR(CHECKOUT_DT, 'YYYY-MM-DD') CHECKOUT_DT, CALCULATE_ST
		FROM RESERVATION
		JOIN CALCULATE USING(BOOK_NO)
		JOIN ROOM USING(ROOM_NO)
		JOIN HOTEL USING(HOTEL_NO)
		WHERE CHECK_FL = 'N'
		AND MEMBER_NO = ?
		AND <![CDATA[CHECKOUT_DT > SYSDATE]]>
	</entry>

	<!-- 이전 예약 -->
	<entry key="reservation">
		SELECT BOOK_NO , HOTEL_TITLE, ROOM_NM,TO_CHAR(CHECKIN_DT, 'YYYY-MM-DD') CHECKIN_DT,TO_CHAR(CHECKOUT_DT, 'YYYY-MM-DD') CHECKOUT_DT
		FROM RESERVATION
		JOIN ROOM USING(ROOM_NO)
		JOIN HOTEL USING(HOTEL_NO)
		WHERE CHECK_FL = 'Y'
		AND MEMBER_NO = ?
		AND <![CDATA[CHECKOUT_DT < SYSDATE]]>
	</entry>
	
	<!-- 리뷰 등록 -->
	<entry key="reviewUpdate">
		INSERT INTO BOARD VALUES(SEQ_BOARD_NO.NEXTVAL,'리뷰', ? ,DEFAULT,
									DEFAULT , 3 , ? , ? ,?)
	</entry>
	
	<!-- 다음 게시글 번호 얻어옴 -->
	<entry key="nextBoardNo">
		SELECT BOARD_NO FROM BOARD
		WHERE BOARD_CONTENT = ?
		AND BOARD_ST = 'N'
		AND BOARD_CD = 3
	</entry>
	
	<!-- 이미지 삽입 -->
	<entry key="reviewImg">
		INSERT INTO REVIEW_IMG VALUES(SEQ_IMG_REVIEW_NO.NEXTVAL, ?, 0 , ?) 
	</entry>


	<!-- 태그 삽입 -->

    <entry key="tagUpdate1">
            INSERT INTO TAG VALUES(?,?,'Y')
           
    </entry>
    
  

	<!-- 예약을 위한 memberNo 얻어오기 -->
	<entry key="getMemberNo">
		SELECT MEMBER_NO
		FROM RESERVATION
		JOIN MEMBER USING(MEMBER_NO)
		WHERE MEMBER_ID = ?
	</entry>

	<!-- 현재 예약 취소 -->
	<entry key="reviewCancel">
		DELETE RESERVATION
		WHERE BOOK_NO = ?
		AND MEMBER_NO = ?
	</entry>

	<!-- 결제 정보 지우기 -->
	<entry key="deleteCalculate">
		DELETE CALCULATE
		WHERE BOOK_NO = ?
	</entry>
	
	<!-- FAQ 작성을 위한 memberNo 얻어오기 -->
	<entry key="getMemberNo2">
		SELECT MEMBER_NO
		FROM MEMBER
		WHERE MEMBER_ID = ?
	</entry>
	
	<!-- FAQ 작성 -->
	<entry key="FAQUpdate">
		INSERT INTO BOARD VALUES(SEQ_BOARD_NO.NEXTVAL ,? ,? ,DEFAULT ,DEFAULT ,4 ,? ,NULL)
	</entry>

	<!-- 리뷰 수정을 위한 boardNo 가져오기 -->
	<entry key="getBoardNo">
		SELECT BOARD_NO
		FROM BOARD
		JOIN MEMBER USING(MEMBER_NO)
		WHERE BOARD_CONTENT = ?
		AND BOARD_CD = 3
		AND MEMBER_ID = ?
	</entry>

	<!-- 리뷰 수정 -->
	<entry key="reviewAlter">
		UPDATE BOARD
		SET BOARD_CONTENT = ?
		WHERE BOARD_CONTENT = ?
		AND BOARD_CD = 3
		AND MEMBER_NO = ?
		AND REVIEW_STAR = ?
	</entry>

	<!-- 회원가입시 이벤트 참여 여부 N -->
	<entry key="insertEventCheck">
		INSERT INTO EVENT_FL
		VALUES(DEFAULT, DEFAULT, ?)
	</entry>
	
	<!-- 다음 회원 번호 조회 -->
	<entry key="memberNextNo">
		SELECT SEQ_MEMBER_NO.NEXTVAL FROM DUAL
	</entry>

	<!-- 이미지 수정 -->
	<entry key="imgUpdate">
		UPDATE REVIEW_IMG
		SET IMG_REVIEW_RENAME = ? 
		WHERE BOARD_NO = ?
		AND IMG_REVIEW_RENAME = ?
	</entry>
	
</properties>
